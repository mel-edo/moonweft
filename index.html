<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>moonweft</title>
        <link rel="stylesheet" href="styles/base.css">
        <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
    </head>

    <body>
        <div class="scanlines"></div>
        <div class="site-container">

            <div class="split-layout">

                <div class="main-window">
                    
                    <header class="site-banner">
                        <img src="assets/banner.png" alt="moonweft banner" class="banner-img">
                    </header>

                    <nav class="top-nav">
                        <a href="#">[home]</a>
                        <a href="projects.html">[projects]</a>
                        <a href="#">[links]</a>
                    </nav>

                    <main>
                        <article class="card fetch-card">
                            <div class="fetch-art">
<pre>
      /\
     /  \
    /\   \
   / > ω <\
  /   __   \
 / __|  |__-\
/_-''    ''-_\
</pre>
                            </div>

                            <div class="fetch-info">
                                <div class="fetch-title">user@moonweft</div>
                                <div class="fetch-separator">----------</div>

                                <div class="fetch-row">
                                    <span class="key">OS:</span>
                                    <span class="val">Arch Linux btw</span>
                                </div>

                                <div class="fetch-row">
                                    <span class="key">Shell:</span>
                                    <span class="val">zsh</span>
                                </div>
                                <div class="fetch-row">
                                    <span class="key">Github:</span> 
                                    <span class="val"><a href="https://github.com/mel-edo" target="_blank" rel="noopener noreferrer">/mel-edo</a></span>
                                </div>

                                <div class="fetch-row">
                                    <span class="key">Time:</span> 
                                    <span class="val" id="clock">loading...</span>
                                </div>

                                <div class="fetch-colors">
                                    <span class="color-box c1"></span>
                                    <span class="color-box c2"></span>
                                    <span class="color-box c3"></span>
                                    <span class="color-box c4"></span>
                                    <span class="color-box c5"></span>
                                </div>
                            </div>

                        </article>

                        <a href="checkpoint.html" class="checkpoint-banner">
                            <div class="cp-icon">
                                <img src="assets/bonfire.png" alt="bonfire">
                            </div>
                            <div class="cp-text">
                                <div class="cp-title">INTERNET CHECKPOINT</div>
                                <div class="cp-sub">Take a rest. Save your progress</div>
                            </div>
                            <div class="cp-arrow">-></div>
                        </a>

                        <hr class="dashed-line">

                        <div class="about-card">
                            <div class="about-header">About</div>
                            <div class="about-content">
                                <p>Hello I'm <strong>meledo</strong>.</p>
                                <p>I fell down the Neocities rabbit hole recently and got inspired to make my own little website.</p>
                                <p>I'll post anything that I'm currently working on here. You can check out some of my projects and links below as well as some blog posts.</p>

                                <div class="about-actions">
                                    <a href="projects.html" class="leak-btn p5-style">
                                        <span class="p5-bg-layer"></span>
                                        <img src="assets/projects-text.png" alt="PROJECTS" class="p5-img">
                                    </a>
                                    <a href="links.html" class="leak-btn y2k-style">
                                        LINKS
                                    </a>
                                </div>
                                <p class="code-tidbit"><a target="_blank" href="https://copyheart.org/manifesto/">Copying is an act of love</a>. If you liked anything here, feel free to copy.<br>The code here is free and open source under GPLv3.</p>
                            </div>
                        </div>

                        <hr class="dashed-line">

                        <div class="blog-section">
                            <div class="section-title">
                                <span>Recent Posts</span>
                                <a href="blog.html">[all]</a>
                            </div>

                            <div class="blog-list">
                                <a href="#" class="blog-entry">
                                    <span class="entry-date">[12 DEC]</span>
                                    <span class="entry-title">epic placeholder</span>
                                </a>

                                <a href="#" class="blog-entry">
                                    <span class="entry-date">[05 DEC]</span>
                                    <span class="entry-title">epic placeholder the 2nd</span>
                                </a>

                                <a href="#" class="blog-entry">
                                    <span class="entry-date">[01 DEC]</span>
                                    <span class="entry-title">regular placeholder</span>
                                </a>
                            </div>
                        </div>

                    </main>
                </div>
                
                <aside class="sidebar">
                    <div class="card music-card">
                        <div class="music-header">
                            <span class="music-icon">[♫]</span>
                            <span id="lf-status">[OFFLINE]</span>
                        </div>

                        <div class="music-info">
                            <div class="music-art">
                                <img id="lf-art" src="assets/vinyl.png" alt="album art">
                            </div>
                            <div class="music-details">
                                <div id="lf-track" class="track-name">Loading...</div>
                                <div id="lf-artist" class="artist-name">---</div>
                            </div>

                        </div>
                    </div>

                    <div class="card status-card">
                        <div class="card-header">[discord]</div>
                        <div class="status-content" id="discord-widget">
                            <div class="status-icon">
                                <img id="discord-pfp" src="assets/default-pfp.png" alt="pfp">
                                <div class="status-dot" id="discord-status-dot"></div>
                            </div>
                            <div class="status-details">
                                <div id="discord-username">loading...</div>
                                <div id="discord-activity" class="scrolling-text">connecting...</div>
                            </div>
                        </div>
                    </div>

                    <div class="card status-card">
                        <div class="card-header">[steam]</div>
                        <div class="status-content">
                            <div class="status-icon">
                                <img id="steam-icon" src="assets/steam-icon.png" alt="steam">
                            </div>
                            <div class="status-details">
                                <div id="steam-status-text" class="recently-played">Recently Played</div>
                                <div id="steam-game" class="highlight-text">loading...</div>
                            </div>
                        </div>
                    </div>

                    <div class="card moon-widget">
                        <div class="mw-header">[moon]</div>
                        
                        <div class="mw-decor-tl">+</div>
                        <div class="mw-decor-tr">?</div>
                        
                        <div class="mw-icon-container">
                            <div id="mw-visual" class="pixel-moon">0</div>
                        </div>

                        <div class="mw-data">
                            <div class="mw-row">
                                <span class="mw-label">Phase:</span>
                                <span id="mw-phase" class="mw-val-yellow">Calculating...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card visitor-panel">
                        <div class="visitor-header">[visitor counter]</div>
                        <div class="visitor-visual">
                            <div class="visitor-counter"><img src="https://count.getloli.com/get/@moonweft-demo?theme=moebooru&padding=4&darkmode=0" alt="visitor count"></div>
                        </div>
                    </div>
                    
                    <div class="card polar-panel">
                        <div class="polar-header">[cool gif I found]</div>
                        <div class="polar-visual">
                            <div class="polar-gif"><img src="assets/bongo-cat-polar-bear.gif" alt="cool gif"></div>
                        </div>
                    </div>

                    <div class="blinkies-panel">
                        <div class="blinkies-header">[network]</div>
                        <div class="blinkies-grid">
                            <img src="assets/firefoxnow.gif" alt="firefox">
                            <img src="assets/pokemon.gif" alt="pokemon">
                            <img src="assets/penguins.gif" alt="penguins">
                            <img src="assets/archlinux.gif" alt="arch">
                            <img src="assets/saynotoweb3.gif" alt="No Web3">
                            <img src="assets/neovim.gif" alt="nvim">
                            <img src="assets/anythingbut.gif" alt="chrome">
                            <img src="assets/bsod.gif" alt="bsod">
                            <img src="assets/mademyown.gif" alt="mademyown">
                            <img src="assets/ublock-now.png" alt="ublock">
                        </div>
                    </div>

                </aside>

            </div>
        </div>

        <script>
            function updateClock() {
                const now = new Date();

                const timeString = now.toLocaleTimeString('en-US', {
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    timeZone: 'Asia/Kolkata',
                    timeZoneName: 'short'
                });

                document.getElementById('clock').textContent = timeString;
            }

            updateClock();
            setInterval(updateClock, 30000);
        </script>

        <script>
            function updateMoonPhase() {
                const now = new Date();

                let year = now.getFullYear();
                let month = now.getMonth() + 1;
                let day = now.getDate();

                if (month < 3) {
                    year--;
                    month += 12;
                }

                let c = 365.25 * year;
                let e = 30.6 * month;
                let jd = c + e + day - 694039.09;
                jd /= 29.5305882;
                let b = parseInt(jd);
                jd -= b;

                const phaseIndex = Math.round(jd * 8) % 8;

                const phaseNames = [
                    "New Moon", "Waxing Crescent", "First Quarter", "Waxing Gibbous",
                    "Full Moon", "Waning Gibbous", "Last Quarter", "Waning Crescent"
                ];

                const textElement = document.getElementById('mw-phase');
                if (textElement) {
                    textElement.textContent = phaseNames[phaseIndex];
                }
                
                const visualElement = document.getElementById('mw-visual');
                if (visualElement) {
                    visualElement.innerHTML = `<img src="assets/moon${phaseIndex}.png" width="96" style="image-rendering: pixelated; display: block;">`;
                }
            }
            updateMoonPhase();
        </script>

        <script>
            const workerUrl = "https://moonweft-music.meledo.workers.dev/music";
            function updateLastFM() {
                fetch(workerUrl)
                    .then(res => res.json())
                    .then(data => {
                        const track = data.recenttracks.track[0];
                        if (!track) return;

                        const isPlaying = track['@attr'] && track['@attr'].nowplaying === 'true';
                        
                        const artUrl = track.image[2]['#text'];

                        const currentTrackName = document.getElementById('lf-track').textContent;

                        document.getElementById('lf-track').textContent = track.name;
                        document.getElementById('lf-artist').textContent = track.artist['#text'];
                        document.getElementById('lf-status').textContent = isPlaying ? "[LISTENING NOW]" : "[RECENTLY LISTENED]";
                        
                        const imgElement = document.getElementById('lf-art');
                        if (artUrl) {
                            imgElement.src = artUrl;
                        } else {
                            if (track.name !==  currentTrackName) {
                                imgElement.src = 'assets/vinyl.png';
                            }
                        }

                        const icon = document.querySelector('.music-icon');
                        if (isPlaying) {
                            icon.style.animation = "blink 1s infinite";
                            document.getElementById('lf-status').style.color = "#a6e3a1"; 
                        } else {
                            icon.style.animation = "none";
                            document.getElementById('lf-status').style.color = "var(--accent)";
                        }
                    })
                    .catch(err => console.error("Worker error:", err));
            }

            updateLastFM();
            setInterval(updateLastFM, 60000); 
        </script>

        <script>
            const steamWorkerUrl = "https://moonweft-music.meledo.workers.dev/steam";
            function updateSteam() {
                fetch(steamWorkerUrl)
                    .then(res => res.json())
                    .then(data => {
                        const games = data.response.games;
                        if (games && games.length > 0) {
                            const game = games[0];
                            document.getElementById('steam-game').textContent = game.name;
                            const imgUrl = `http://media.steampowered.com/steamcommunity/public/images/apps/${game.appid}/${game.img_icon_url}.jpg`;
                            document.getElementById('steam-icon').src = imgUrl;
                        } else {
                            document.getElementById('steam-game').textContent = "Offline";
                        }
                    })
                    .catch(err => console.error("Steam error:", err));
            }
            updateSteam();
            setInterval(updateSteam, 300000);
        </script>

        <script>
            const discordID = "246259493111857152";

            function initDiscord() {
                fetch(`https://api.lanyard.rest/v1/users/${discordID}`)
                    .then(res => res.json())
                    .then(data => {
                        if (!data.success) return;
                        const d = data.data;

                        const avatarID = d.discord_user.avatar;
                        document.getElementById('discord-pfp').src =
                            `https://cdn.discordapp.com/avatars/${discordID}/${avatarID}.png`;
                        document.getElementById('discord-username').textContent = d.discord_user.username;

                        const statusColors = {
                            online: "#43b581",
                            idle: "#faa61a",
                            dnd: "#f04747",
                            offline: "#747f8d"
                        };
                        document.getElementById('discord-status-dot').style.background =
                            statusColors[d.discord_status] || statusColors.offline;
                        
                        const activity = d.activities.find(a => a.type === 0);
                        if (activity) {
                            document.getElementById('discord-activity').textContent = `Playing: ${activity.name}`;
                        } else {
                            document.getElementById('discord-activity').textContent = "Chilling";
                        }
                    });
            }
        initDiscord();
        setInterval(initDiscord, 120000);
        </script>

        <footer class="site-footer">
            <p>© 2025 moonweft</p>
            <p class="mail"><a href="mailto:meledo@duck.com" target="_blank">meledo@duck.com</a></p>
        </footer>

        <script src="scripts/oneko.js"></script>

    </body>

</html>